<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <title>×¤×¨×•×™×§×˜ ××¡×“×™ × ×ª×•× ×™× â€“ ×¡×¤×¨×™×™×”</title>

    <!-- ×—×™×‘×•×¨ ×œ×§×•×‘×¥ ×”×¢×™×¦×•×‘ -->
    <link rel="stylesheet" href="style.css">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>

<header class="hero">
    <h1>×¤×¨×•×™×§×˜ ××¡×“×™ × ×ª×•× ×™× â€“ ×¡×¤×¨×™×™×” ğŸ“š</h1>
    <p class="subtitle">
        ××¢×¨×›×ª ×œ× ×™×”×•×œ ×¡×¤×¨×™×, ×›×¨×›×™× ×•×¨×›×™×©×•×ª<br>
        ×§×•×¨×¡ ××¡×“×™ × ×ª×•× ×™×
    </p>
</header>

<section class="card">
    <h2>ğŸ¯ ××˜×¨×ª ×”×¤×¨×•×™×§×˜</h2>
    <p>
        ×¤×¨×•×™×§×˜ ×–×” ××“×’×™× ×‘× ×™×™×ª ××¡×“ × ×ª×•× ×™× ×¢×‘×•×¨ ×¡×¤×¨×™×™×”, ×›×•×œ×œ:
        ×¡×¤×¨×™× ×¢× ××¡×¤×¨ ×›×¨×›×™×, ×œ×§×•×—×•×ª, ×¨×›×™×©×•×ª ×•×©××™×œ×ª×•×ª SQL ××ª×§×“××•×ª.
    </p>
    <p>
        ×”×§×™×©×•×¨ × ×•×¢×“ ×œ×”××—×™×© ××™× ×˜×¨××§×¦×™×” ×¢× × ×ª×•× ×™ ×”×¡×¤×¨×™×,
        ×‘×“×•××” ×œ×“×¨×™×©×•×ª <strong>×©××œ×” 7</strong>.
    </p>
</section>

<section class="card">
    <h2>ğŸ‘©â€ğŸ’» ××©×ª×ª×¤×•×ª</h2>
    <ul>
        <li>×©×™×¨×”</li>
        <li>×”×•×“×™×”</li>
    </ul>
</section>

<section class="card">
    <h2>ğŸ“– ×¨×©×™××ª ×¡×¤×¨×™×</h2>

    <div class="controls">
        <input
            type="text"
            id="search"
            placeholder="×—×™×¤×•×© ×œ×¤×™ ×©× ×¡×¤×¨..."
        >

        <select id="sort">
            <option value="id_asc">××™×•×Ÿ ×œ×¤×™ ××–×”×” â†‘</option>
            <option value="id_desc">××™×•×Ÿ ×œ×¤×™ ××–×”×” â†“</option>
            <option value="title_asc">××™×•×Ÿ ×œ×¤×™ ×©× ×-×ª</option>
            <option value="title_desc">××™×•×Ÿ ×œ×¤×™ ×©× ×ª-×</option>
        </select>

        <button id="load">×˜×¢×Ÿ ×¡×¤×¨×™×</button>
        <button id="clear">× ×§×”</button>
    </div>

    <p id="status" class="status"></p>

    <div id="grid" class="grid"></div>
</section>

<footer>
    Library Database Project â€” Shira & Hodaya Â©
</footer>

<script>
    let books = [];

    const loadBtn = document.getElementById("load");
    const clearBtn = document.getElementById("clear");
    const grid = document.getElementById("grid");
    const statusEl = document.getElementById("status");
    const searchEl = document.getElementById("search");
    const sortEl = document.getElementById("sort");

    function render(list) {
        grid.innerHTML = "";

        if (list.length === 0) {
            grid.innerHTML = "<p>×œ× × ××¦××• ×¡×¤×¨×™×</p>";
            return;
        }

        list.forEach(b => {
            const div = document.createElement("div");
            div.className = "book-card";
            div.innerHTML = `
                <h3>${b.title}</h3>
                <p><strong>××–×”×”:</strong> ${b.product_id}</p>
                <p><strong>××—×™×¨:</strong> ${b.price} â‚ª</p>
                <p><strong>××¡×¤×¨ ×›×¨×›×™×:</strong> ${b.volumes}</p>
            `;
            grid.appendChild(div);
        });
    }

    function applyFilters() {
        let list = [...books];

        const q = searchEl.value.trim().toLowerCase();
        if (q) {
            list = list.filter(b =>
                b.title.toLowerCase().includes(q)
            );
        }

        const sort = sortEl.value;
        list.sort((a, b) => {
            if (sort === "id_asc") return a.product_id - b.product_id;
            if (sort === "id_desc") return b.product_id - a.product_id;
            if (sort === "title_asc") return a.title.localeCompare(b.title);
            if (sort === "title_desc") return b.title.localeCompare(a.title);
            return 0;
        });

        render(list);
    }

    loadBtn.addEventListener("click", async () => {
        statusEl.textContent = "×˜×•×¢×Ÿ × ×ª×•× ×™×...";
        try {
            const res = await fetch("books.json", { cache: "no-store" });
            books = await res.json();
            statusEl.textContent = "×”× ×ª×•× ×™× × ×˜×¢× ×• ×‘×”×¦×œ×—×” âœ”";
            applyFilters();
        } catch (e) {
            statusEl.textContent = "×©×’×™××” ×‘×˜×¢×™× ×ª books.json";
        }
    });

    clearBtn.addEventListener("click", () => {
        books = [];
        grid.innerHTML = "";
        searchEl.value = "";
        statusEl.textContent = "×”××¡×š × ×•×§×”";
    });

    searchEl.addEventListener("input", applyFilters);
    sortEl.addEventListener("change", applyFilters);
</script>

</body>
</html>
